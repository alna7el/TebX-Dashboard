<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TebX Receptionist Dashboard (Standalone Shadcn-style)</title>
    
    <!-- Font Awesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- Tailwind CSS CDN with Shadcn-like configuration -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(221.2 83.2% 53.3%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                            DEFAULT: "hsl(221.2 83.2% 53.3%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 47.4% 11.2%)",
                        },
                        destructive: {
                            DEFAULT: "hsl(0 84.2% 60.2%)",
                            foreground: "hsl(210 40% 98%)",
                        },
                        muted: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                            DEFAULT: "hsl(210 40% 96%)",
                            foreground: "hsl(222.2 47.4% 11.2%)",
                        },
                        card: {
                            DEFAULT: "hsl(0 0% 100%)",
                            foreground: "hsl(222.2 84% 4.9%)",
                        },
                    },
                    borderRadius: {
                        lg: "0.5rem",
                        md: "calc(0.5rem - 2px)",
                        sm: "calc(0.5rem - 4px)",
                    },
                },
            },
        };
    </script>

    <!-- React and ReactDOM from CDN -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX transformation in browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom styles to enhance Shadcn-like appearance */
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            background: linear-gradient(135deg, hsl(221.2 83.2% 53.3%) 0%, hsl(270 60% 40%) 100%);
            min-height: 100vh;
            color: hsl(222.2 84% 4.9%);
        }
        .card {
            @apply rounded-lg border bg-card text-card-foreground shadow-sm;
        }
        .card-header {
            @apply flex flex-col space-y-1.5 p-6;
        }
        .card-title {
            @apply text-2xl font-semibold leading-none tracking-tight;
        }
        .card-content {
            @apply p-6 pt-0;
        }
        .btn {
            @apply inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50;
        }
        .btn-default {
            @apply bg-primary text-primary-foreground hover:bg-primary/90;
        }
        .btn-destructive {
            @apply bg-destructive text-destructive-foreground hover:bg-destructive/90;
        }
        .btn-secondary {
            @apply bg-secondary text-secondary-foreground hover:bg-secondary/80;
        }
        .btn-outline {
            @apply border border-input bg-background hover:bg-accent hover:text-accent-foreground;
        }
        .input {
            @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
        }
        .select {
            @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
        }
        .badge {
            @apply inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;
        }
        .badge-default {
            @apply border-transparent bg-primary text-primary-foreground hover:bg-primary/80;
        }
        .badge-secondary {
            @apply border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80;
        }
        .badge-destructive {
            @apply border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            opacity: 0;
        }
        .notification.show {
            transform: translateX(0);
            opacity: 1;
        }
        .notification.success { background: hsl(142.1 76.2% 36.3%); }
        .notification.error { background: hsl(0 84.2% 60.2%); }
        .notification.warning { background: hsl(48 96% 50%); }

        .demo-banner {
            @apply fixed bottom-0 left-0 right-0 bg-amber-500 text-white text-center py-2 font-bold z-50;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="notification" class="notification"></div>
    <div class="demo-banner">DEMO MODE - Using simulated data</div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Helper functions (mimicking utils.ts)
        function formatDate(date) {
            return date.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Mock Data and State Management
        const initialMockState = {
            config: {
                averageServiceTime: 15, // minutes
            },
            patients: [
                { id: "pat-1", name: "Ahmed Mohammed", mrn: "MRN001" },
                { id: "pat-2", name: "Fatima Ahmed", mrn: "MRN002" },
                { id: "pat-3", name: "Mohammed Ali", mrn: "MRN003" },
                { id: "pat-4", name: "Sara Mahmoud", mrn: "MRN004" },
                { id: "pat-5", name: "Khalid Abdulrahman", mrn: "MRN005" },
            ],
            doctors: [
                { id: "doc-1", name: "Dr. Sarah Johnson", speciality: "Cardiology" },
                { id: "doc-2", name: "Dr. Ahmed Al-Rashid", speciality: "General Medicine" },
                { id: "doc-3", name: "Dr. Maria Garcia", speciality: "Pediatrics" },
            ],
            appointments: []
        };

        function generateInitialAppointments(state) {
            state.appointments = [];
            for (let i = 0; i < 25; i++) {
                state.appointments.push({
                    id: `apt-${i + 1}`,
                    patientId: state.patients[i % 5].id,
                    doctorId: state.doctors[i % 3].id,
                    service: "Consultation",
                    scheduledTime: `${9 + Math.floor(i / 4)}:${(i % 4) * 15 || '00'}`,
                    status: 'Scheduled', // Scheduled, Arrived, InProgress, Completed, Cancelled
                    isEmergency: false,
                    arrivalTime: null,
                });
            }
        }

        const App = () => {
            const [mockState, setMockState] = useState(() => {
                const state = JSON.parse(JSON.stringify(initialMockState)); // Deep copy
                generateInitialAppointments(state);
                return state;
            });
            const [selectedPatient, setSelectedPatient] = useState(null);
            const [searchTerm, setSearchTerm] = useState("");
            const [searchResults, setSearchResults] = useState([]);
            const [emergencyReason, setEmergencyReason] = useState("");
            const [emergencyPriority, setEmergencyPriority] = useState("high");
            const [currentDate, setCurrentDate] = useState(formatDate(new Date()));
            const [lastUpdated, setLastUpdated] = useState(new Date().toLocaleTimeString());

            useEffect(() => {
                const intervalId = setInterval(() => {
                    setCurrentDate(formatDate(new Date()));
                    setLastUpdated(new Date().toLocaleTimeString());
                }, 60000);
                return () => clearInterval(intervalId);
            }, []);

            const calculateDashboardState = () => {
                const { appointments, doctors, config } = mockState;

                const inProgress = appointments.filter(a => a.status === 'InProgress');
                const arrived = appointments.filter(a => a.status === 'Arrived');
                const completed = appointments.filter(a => a.status === 'Completed');
                const scheduled = appointments.filter(a => a.status === 'Scheduled');

                const busyDoctorIds = inProgress.map(a => a.doctorId);
                const availableDoctors = doctors.filter(d => !busyDoctorIds.includes(d.id));

                const appointmentSummary = {
                    total: appointments.filter(a => a.status !== 'Cancelled').length,
                    completed: completed.length,
                    inProgress: inProgress.length,
                    waiting: arrived.length,
                    scheduled: scheduled.length,
                };

                const patientFlow = {
                    waiting: arrived.length,
                    withDoctor: inProgress.length,
                };

                const avgWaitTime = availableDoctors.length > 0
                    ? Math.ceil((arrived.length / availableDoctors.length) * config.averageServiceTime)
                    : 99; // High wait time if no doctors are free

                const doctorStatus = doctors.map(doc => {
                    const assignedPatient = inProgress.find(a => a.doctorId === doc.id);
                    return {
                        ...doc,
                        isAvailable: !assignedPatient,
                        currentPatients: assignedPatient ? 1 : 0,
                    };
                });
                
                // Sort waiting room queue - emergency patients first, then by arrival time
                const waitingRoomQueue = [...arrived].sort((a, b) => {
                    // Sort by emergency status first (emergencies first)
                    if (a.isEmergency && !b.isEmergency) return -1;
                    if (!a.isEmergency && b.isEmergency) return 1;
                    // Then sort by arrival time
                    return a.arrivalTime - b.arrivalTime;
                });
                
                return {
                    appointmentSummary,
                    patientFlow,
                    avgWaitTime,
                    doctorStatus,
                    waitingRoomQueue,
                };
            }

            const handleSearch = (term) => {
                setSearchTerm(term);
                if (!term || term.length < 2) {
                    setSearchResults([]);
                    return;
                }
                
                const termLower = term.toLowerCase();
                const results = mockState.patients.filter(p => 
                    p.name.toLowerCase().includes(termLower) ||
                    p.mrn.toLowerCase().includes(termLower)
                );
                
                setSearchResults(results);
            }

            const selectPatient = (patient) => {
                setSelectedPatient(patient);
                setSearchTerm(patient.name);
                setSearchResults([]);
                showNotification(`Selected: ${patient.name}`);
            }

            const clearPatientSelection = () => {
                setSelectedPatient(null);
                setSearchTerm("");
                setSearchResults([]);
            }

            const checkInSelected = () => {
                if (!selectedPatient) {
                    showNotification('Please select a patient first', 'warning');
                    return;
                }
                
                const appointment = mockState.appointments.find(a => 
                    a.patientId === selectedPatient.id && a.status === 'Scheduled'
                );
                
                if (!appointment) {
                    showNotification(`${selectedPatient.name} has no scheduled appointment to check in.`, 'error');
                    return;
                }
                
                setMockState(prev => {
                    const updatedAppointments = prev.appointments.map(a => {
                        if (a.id === appointment.id) {
                            return { ...a, status: 'Arrived', arrivalTime: new Date() };
                        }
                        return a;
                    });
                    
                    return { ...prev, appointments: updatedAppointments };
                });
                
                showNotification(`${selectedPatient.name} checked in successfully.`);
                clearPatientSelection();
            }

            const simulateProgress = () => {
                setMockState(prev => {
                    const updatedAppointments = [...prev.appointments];
                    
                    // 1. A doctor finishes with a patient
                    const inProgressIndex = updatedAppointments.findIndex(a => a.status === 'InProgress');
                    if (inProgressIndex !== -1) {
                        updatedAppointments[inProgressIndex].status = 'Completed';
                    }
                    
                    // 2. An available doctor takes the next patient from the queue
                    // First check for emergency patients
                    let nextPatient = updatedAppointments.find(a => a.status === 'Arrived' && a.isEmergency);
                    
                    // If no emergency patients, take the next regular patient by arrival time
                    if (!nextPatient) {
                        const waitingPatients = updatedAppointments
                            .filter(a => a.status === 'Arrived')
                            .sort((a, b) => a.arrivalTime - b.arrivalTime);
                        nextPatient = waitingPatients[0];
                    }
                    
                    if (nextPatient) {
                        const availableDoctor = prev.doctors.find(d => 
                            !updatedAppointments.some(a => a.doctorId === d.id && a.status === 'InProgress')
                        );
                        
                        if (availableDoctor) {
                            const nextPatientIndex = updatedAppointments.findIndex(a => a.id === nextPatient.id);
                            updatedAppointments[nextPatientIndex].status = 'InProgress';
                            updatedAppointments[nextPatientIndex].doctorId = availableDoctor.id;
                        }
                    }
                    
                    return { ...prev, appointments: updatedAppointments };
                });
                
                showNotification('Clinic progress has been simulated.');
                setLastUpdated(new Date().toLocaleTimeString());
            }

            const createEmergencyBooking = () => {
                if (!selectedPatient) {
                    showNotification('Please select a patient for the emergency.', 'warning');
                    return;
                }
                
                if (!emergencyReason) {
                    showNotification('Please provide an emergency reason.', 'warning');
                    return;
                }
                
                const priority = document.getElementById('emergency-priority').value;

                const newEmergencyAppointment = {
                    id: `apt-emergency-${Date.now()}`,
                    patientId: selectedPatient.id,
                    doctorId: null, // To be assigned
                    service: `Emergency: ${emergencyReason} (${priority})`,
                    scheduledTime: "ASAP",
                    status: 'Arrived',
                    isEmergency: true,
                    arrivalTime: new Date(),
                    priority: priority
                };

                setMockState(prev => ({
                    ...prev,
                    appointments: [...prev.appointments, newEmergencyAppointment]
                }));
                
                showNotification(`Emergency booking for ${selectedPatient.name} created.`);
                setEmergencyReason("");
                clearPatientSelection();
            }

            const showBulkUpdate = () => {
                const scheduledAppointments = mockState.appointments.filter(a => a.status === 'Scheduled');
                const toCancel = scheduledAppointments.slice(0, 3); // Cancel first 3
                
                if (toCancel.length === 0) {
                    showNotification('No scheduled appointments to cancel.', 'warning');
                    return;
                }
                
                // Add confirmation dialog
                if (confirm(`Are you sure you want to cancel ${toCancel.length} appointments?`)) {
                    setMockState(prev => {
                        const updatedAppointments = prev.appointments.map(a => {
                            if (toCancel.some(c => c.id === a.id)) {
                                return { ...a, status: 'Cancelled' };
                            }
                            return a;
                        });
                        
                        return { ...prev, appointments: updatedAppointments };
                    });
                    
                    showNotification(`${toCancel.length} appointments have been cancelled.`);
                }
            }

            const showReschedule = () => {
                if (!selectedPatient) {
                    showNotification('Please select a patient to reschedule.', 'warning');
                    return;
                }
                
                const appointment = mockState.appointments.find(a => 
                    a.patientId === selectedPatient.id && 
                    (a.status === 'Scheduled' || a.status === 'Arrived')
                );
                
                if (!appointment) {
                    showNotification(`${selectedPatient.name} has no active appointment to reschedule.`, 'error');
                    return;
                }
                
                const newTime = prompt("Enter new time (e.g., 15:30):", appointment.scheduledTime);
                
                if (newTime) {
                    setMockState(prev => {
                        const updatedAppointments = prev.appointments.map(a => {
                            if (a.id === appointment.id) {
                                return { ...a, scheduledTime: newTime };
                            }
                            return a;
                        });
                        
                        return { ...prev, appointments: updatedAppointments };
                    });
                    
                    showNotification(`Appointment for ${selectedPatient.name} rescheduled.`);
                    clearPatientSelection();
                }
            }

            const showAnalytics = () => {
                const state = calculateDashboardState();
                const { total, completed, waiting, inProgress, scheduled } = state.appointmentSummary;
                
                // Calculate doctor utilization
                const busyDoctors = state.doctorStatus.filter(d => !d.isAvailable).length;
                const totalDoctors = state.doctorStatus.length;
                const doctorUtilization = totalDoctors > 0 ? Math.round((busyDoctors / totalDoctors) * 100) : 0;
                
                // Calculate completion rate
                const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;
                
                // Count emergency appointments
                const emergencyCount = mockState.appointments.filter(a => a.isEmergency).length;
                
                // Create a more detailed analytics display
                const analyticsData = `
=== CLINIC ANALYTICS ===

APPOINTMENTS
• Total Appointments: ${total}
• Completed: ${completed} (${completionRate}%)
• In Progress: ${inProgress}
• Waiting: ${waiting}
• Scheduled: ${scheduled}
• Emergency Cases: ${emergencyCount}

PATIENT FLOW
• Average Wait Time: ${state.avgWaitTime} minutes
• Patients Currently in Building: ${waiting + inProgress}

DOCTOR UTILIZATION
• Busy Doctors: ${busyDoctors}/${totalDoctors} (${doctorUtilization}%)
• Available Doctors: ${totalDoctors - busyDoctors}

=== Generated at ${new Date().toLocaleTimeString()} ===`;
                
                alert(analyticsData);
            }

            // Calculate current dashboard state
            const dashboardState = calculateDashboardState();

            // Render the dashboard
            return (
                <div className="min-h-screen p-4 md:p-6">
                    <div className="max-w-7xl mx-auto space-y-6">
                        {/* Header */}
                        <div className="card">
                            <div className="card-header flex flex-row items-center justify-between">
                                <div>
                                    <h1 className="card-title">TebX Medical Center</h1>
                                    <p className="text-sm text-muted-foreground">{currentDate}</p>
                                </div>
                                <div className="flex items-center gap-4">
                                    <div className="flex items-center gap-2">
                                        <div className="h-2 w-2 rounded-full bg-green-500"></div>
                                        <span className="text-sm">System Online</span>
                                    </div>
                                    <div className="flex items-center gap-2">
                                        <div className="h-2 w-2 rounded-full bg-red-500"></div>
                                        <span className="text-sm">Demo Mode</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        {/* Dashboard Grid */}
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            {/* Clinic Overview Card */}
                            <div className="card md:row-span-2">
                                <div className="card-header flex flex-row items-center justify-between">
                                    <h2 className="card-title flex items-center gap-2">
                                        <i className="fas fa-chart-line"></i> Clinic Overview
                                    </h2>
                                    <button 
                                        className="btn btn-default"
                                        onClick={simulateProgress}
                                    >
                                        <i className="fas fa-sync-alt mr-2"></i> Simulate Progress
                                    </button>
                                </div>
                                <div className="card-content space-y-6">
                                    {/* Stats Grid */}
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-slate-50 p-4 rounded-lg border-l-4 border-blue-500">
                                            <span className="block text-2xl font-bold">{dashboardState.appointmentSummary.total}</span>
                                            <span className="text-xs text-muted-foreground">Total Appointments</span>
                                        </div>
                                        <div className="bg-slate-50 p-4 rounded-lg border-l-4 border-green-500">
                                            <span className="block text-2xl font-bold">{dashboardState.appointmentSummary.completed}</span>
                                            <span className="text-xs text-muted-foreground">Completed</span>
                                        </div>
                                        <div className="bg-slate-50 p-4 rounded-lg border-l-4 border-amber-500">
                                            <span className="block text-2xl font-bold">{dashboardState.patientFlow.waiting}</span>
                                            <span className="text-xs text-muted-foreground">Waiting</span>
                                        </div>
                                        <div className="bg-slate-50 p-4 rounded-lg border-l-4 border-purple-500">
                                            <span className="block text-2xl font-bold">{dashboardState.avgWaitTime}</span>
                                            <span className="text-xs text-muted-foreground">Avg Wait (min)</span>
                                        </div>
                                    </div>

                                    {/* Doctor Status */}
                                    <div>
                                        <h3 className="text-lg font-medium mb-3">Doctor Status</h3>
                                        <div className="space-y-3 max-h-[200px] overflow-y-auto">
                                            {dashboardState.doctorStatus.length === 0 ? (
                                                <p className="text-center text-muted-foreground">No doctors available</p>
                                            ) : (
                                                dashboardState.doctorStatus.map(doctor => (
                                                    <div 
                                                        key={doctor.id}
                                                        className={`flex justify-between items-center p-3 bg-slate-50 rounded-lg border-l-4 ${
                                                            doctor.isAvailable ? 'border-green-500' : 'border-amber-500'
                                                        }`}
                                                    >
                                                        <div>
                                                            <div className="font-medium">{doctor.name}</div>
                                                            <div className="text-xs text-muted-foreground">{doctor.speciality}</div>
                                                        </div>
                                                        <span className={`badge ${doctor.isAvailable ? 'badge-default' : 'badge-secondary'}`}>
                                                            {doctor.isAvailable ? 'Available' : 'Busy'}
                                                        </span>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                    </div>
                                </div>
                                <div className="p-6 pt-0">
                                    <p className="text-xs text-muted-foreground w-full text-center">
                                        Last updated: {lastUpdated}
                                    </p>
                                </div>
                            </div>
                            
                            {/* Waiting Room Card */}
                            <div className="card">
                                <div className="card-header flex flex-row items-center justify-between">
                                    <h2 className="card-title flex items-center gap-2">
                                        <i className="fas fa-users"></i> Waiting Room
                                    </h2>
                                </div>
                                <div className="card-content space-y-4">
                                    {/* Stats Grid */}
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-slate-50 p-4 rounded-lg border-l-4 border-blue-500">
                                            <span className="block text-2xl font-bold">{dashboardState.patientFlow.waiting}</span>
                                            <span className="text-xs text-muted-foreground">In Queue</span>
                                        </div>
                                        <div className="bg-slate-50 p-4 rounded-lg border-l-4 border-amber-500">
                                            <span className="block text-2xl font-bold">{dashboardState.patientFlow.withDoctor}</span>
                                            <span className="text-xs text-muted-foreground">Being Served</span>
                                        </div>
                                    </div>
                                    
                                    {/* Queue List */}
                                    <div className="space-y-3 max-h-[300px] overflow-y-auto">
                                        {dashboardState.waitingRoomQueue.length === 0 ? (
                                            <p className="text-center text-muted-foreground">No patients in queue</p>
                                        ) : (
                                            dashboardState.waitingRoomQueue.map((appointment, index) => {
                                                const patient = mockState.patients.find(p => p.id === appointment.patientId);
                                                if (!patient) return null;
                                                
                                                return (
                                                    <div 
                                                        key={appointment.id}
                                                        className={`flex justify-between items-center p-3 bg-slate-50 rounded-lg border-l-4 ${
                                                            appointment.isEmergency ? 'border-red-500 bg-red-50' : 'border-blue-500'
                                                        }`}
                                                    >
                                                        <div>
                                                            <div className="font-medium flex items-center gap-1">
                                                                {appointment.isEmergency && (
                                                                    <span className="text-red-500 font-bold">EMERGENCY:</span>
                                                                )}
                                                                {patient.name}
                                                            </div>
                                                            <div className="text-xs text-muted-foreground">
                                                                {patient.mrn} • {appointment.service} • {appointment.scheduledTime}
                                                            </div>
                                                        </div>
                                                        <span 
                                                            className={`badge rounded-full h-6 w-6 flex items-center justify-center p-0 ${
                                                                appointment.isEmergency ? 'badge-destructive' : 'badge-secondary'
                                                            }`}
                                                        >
                                                            {index + 1}
                                                        </span>
                                                    </div>
                                                );
                                            })
                                        )}
                                    </div>
                                </div>
                                <div className="p-6 pt-0">
                                    <p className="text-xs text-muted-foreground w-full text-center">
                                        Last updated: {lastUpdated}
                                    </p>
                                </div>
                            </div>
                            
                            {/* Quick Actions Card */}
                            <div className="card">
                                <div className="card-header">
                                    <h2 className="card-title flex items-center gap-2">
                                        <i className="fas fa-bolt"></i> Quick Actions
                                    </h2>
                                </div>
                                <div className="card-content space-y-6">
                                    {/* Patient Check-in */}
                                    <div className="space-y-3 bg-slate-50 p-4 rounded-lg">
                                        <h3 className="font-medium">Patient Check-in</h3>
                                        <div className="space-y-2">
                                            <label className="text-sm text-muted-foreground">Search Patient</label>
                                            <input 
                                                className="input"
                                                placeholder="Name or MRN"
                                                value={searchTerm}
                                                onChange={(e) => handleSearch(e.target.value)}
                                            />
                                        </div>
                                        
                                        {searchResults.length > 0 && (
                                            <div className="max-h-[150px] overflow-y-auto space-y-1 border rounded-md p-1">
                                                {searchResults.map(patient => (
                                                    <div 
                                                        key={patient.id}
                                                        className="p-2 hover:bg-slate-100 rounded cursor-pointer text-sm"
                                                        onClick={() => selectPatient(patient)}
                                                    >
                                                        <strong>{patient.name}</strong><br />
                                                        <span className="text-xs text-muted-foreground">{patient.mrn}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                        
                                        <button 
                                            className="btn btn-default w-full"
                                            onClick={checkInSelected}
                                        >
                                            <i className="fas fa-user-check mr-2"></i> Check In
                                        </button>
                                    </div>
                                    
                                    {/* Emergency Booking */}
                                    <div className="space-y-3 bg-red-50 p-4 rounded-lg border-2 border-red-100">
                                        <h3 className="font-medium text-red-600">Emergency Booking</h3>
                                        <div className="space-y-2">
                                            <label className="text-sm text-muted-foreground">Priority Level</label>
                                            <select 
                                                id="emergency-priority"
                                                className="select"
                                                value={emergencyPriority}
                                                onChange={(e) => setEmergencyPriority(e.target.value)}
                                            >
                                                <option value="high">High</option>
                                                <option value="urgent">Urgent</option>
                                                <option value="critical">Critical</option>
                                            </select>
                                        </div>
                                        
                                        <div className="space-y-2">
                                            <label className="text-sm text-muted-foreground">Reason</label>
                                            <input 
                                                className="input"
                                                placeholder="Emergency reason"
                                                value={emergencyReason}
                                                onChange={(e) => setEmergencyReason(e.target.value)}
                                            />
                                        </div>
                                        
                                        <button 
                                            className="btn btn-destructive w-full"
                                            onClick={createEmergencyBooking}
                                        >
                                            <i className="fas fa-exclamation-triangle mr-2"></i> Create Emergency
                                        </button>
                                    </div>
                                    
                                    {/* Quick Operations */}
                                    <div className="space-y-3 bg-slate-50 p-4 rounded-lg">
                                        <h3 className="font-medium">Quick Operations</h3>
                                        <div className="grid grid-cols-1 gap-2">
                                            <button 
                                                className="btn btn-default w-full"
                                                onClick={showBulkUpdate}
                                            >
                                                <i className="fas fa-edit mr-2"></i> Bulk Cancel
                                            </button>
                                            
                                            <button 
                                                className="btn btn-secondary w-full"
                                                onClick={showReschedule}
                                            >
                                                <i className="fas fa-calendar-alt mr-2"></i> Reschedule
                                            </button>
                                            
                                            <button 
                                                className="btn btn-outline w-full"
                                                onClick={showAnalytics}
                                            >
                                                <i className="fas fa-chart-bar mr-2"></i> Analytics
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the App component into the root element
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
